"use strict";define(["jquery","echarts","modules/chartDataFormate"],function(s,l,n){return{riskMap:function(o){var a,e=this,t=this.initData(o),r=(a=o,function(){var r;s.ajax({url:a.geoJsonUrl,dataType:"json",async:!1,success:function(o){r=o}}),l.registerMap(a.map,r);var o=n.FormateGroupData(t,"riskMap",a.stack);(function(o,r){var t=[{name:"低风险",value:{type:"scatter",symbol:"circle",symbolSize:function(o){if(o)return o[2]/2},itemStyle:{normal:{color:"#f4e925"}}}},{name:"高风险",value:{type:"effectScatter",symbol:"circle",symbolSize:function(o){if(o)return o[2]/6},itemStyle:{normal:{color:"#f4e925"}}}}],s=[{type:"map",map:r,geoIndex:1,aspectScale:.75,label:{normal:{show:!0,textStyle:{color:"#fff"}},emphasis:{textStyle:{color:"#fff"}}},itemStyle:{normal:{borderColor:"rgba(147, 235, 248, 1)",borderWidth:1,areaColor:{type:"radial",x:.5,y:.5,r:.8,colorStops:[{offset:0,color:"rgba(53, 142, 228, 0)"},{offset:.8,color:"rgba(53, 142, 228, .4)"},{offset:1,color:"rgba(53, 142, 228, .8)"}],globalCoord:!1}},emphasis:{areaColor:"#389BB7",borderWidth:0}},roam:!1,zoom:1.2}];_.forEach(o.series,function(a,o){var e={name:a.name,coordinateSystem:"geo",data:a.data,label:{normal:{formatter:function(){return""},position:"right",show:!1}}};_.forEach(t,function(o,r){o.name===a.name&&_.merge(e,o.value)}),s.push(e)});var a={geo:{show:!0,map:r,aspectScale:.75,itemStyle:{normal:{areaColor:{type:"radial",x:.5,y:.5,r:.8,colorStops:[{offset:0,color:"rgba(53, 142, 228, 0)"},{offset:1,color:"rgba(53, 142, 228, .8)"}],globalCoord:!1},shadowColor:"rgba(12, 35, 63, 1)",shadowOffsetX:10,shadowOffsetY:10,shadowBlur:6},emphasis:{areaColor:"#389BB7",borderWidth:0}},roam:!1,zoom:1.2},tooltip:{show:!0,backgroundColor:"transparent",formatter:function(o){if("effectScatter"===o.seriesType||"scatter"===o.seriesType)return'<div class="tooltip"><p class="name" style="word-wrap:break-word;">'+o.name+"</p><p>风险等级 <span>"+parseInt(o.data.value[2]/10)+"</span>级</p></div>"}},toolbox:{show:!0},series:s};this.renderChart(a)}).call(e,o,a.map)});return this.tasks.push(r),this}}});